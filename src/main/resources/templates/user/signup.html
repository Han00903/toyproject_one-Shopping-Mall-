<!DOCTYPE html>
<html lang=" utf-8"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" >

<head>
    <meta charset="UTF-8">
    <title>회원가입 페이지</title>
</head>
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/login.css">
<body>
<div class="navbar" >
    <ul id="logo_text">
        <li><a th:href = "@{/toyproject_one/main}" >Shopping Mall</a></li>
    </ul>
    <ul id="menu">
        <li><a th:href = "@{/toyproject_one/login}">로그인</a></li>
        <li><a th:href = "@{/toyproject_one/signup}">회원가입</a></li>
    </ul>
</div>

<form th:action="@{/toyproject_one/signup}" method="post" modelAttribute="userDTO">
<p class="tip"></p>
<!--<div class="cont">  아래위 흰색background 생기는 css 삭제함-->
    <div>
    <div class="form sign-in">
        <h2>Sign UP</h2>
        <br>

        <label>
            <input class="font" type="text" id="user_id" name="user_id" placeholder="  아이디" style="width: 350px; margin: 0 auto;" /><br>
            <span id="user_id_message" style="color: #c20c0c;"></span>
        </label>

        <script>
            document.getElementById('user_id').addEventListener('blur', function() {
                var userIdInput = this.value;
                var userIdMessage = document.getElementById('user_id_message');

                if (userIdInput.trim() === '') {
                    userIdMessage.textContent = "아이디를 입력해주세요.";
                } else if (!/^[\w]{5,15}$/.test(userIdInput)) {
                    userIdMessage.textContent = "영문, 숫자, '_'만 입력 가능하며 5자리 이상 15자리 이하여야 합니다.";
                } else {
                    userIdMessage.textContent = "";
                }
            });
        </script>

        <label>
            <input class="font" type="password" id="user_pw" name="user_pw" placeholder="  비밀번호" style="width: 350px; margin: 0 auto;" /><br>
            <span id="user_pw_message" style="color: #c20c0c;"></span>
        </label>

        <script>
            document.getElementById('user_pw').addEventListener('blur', function() {
                var userPwInput = this.value;
                var userPwMessage = document.getElementById('user_pw_message');

                if (!/(?=.*[0-9])(?=.*[a-zA-Z])(?=.*\W)(?=\S+$).{8,20}/.test(userPwInput)) {
                    userPwMessage.textContent = "비밀번호는 8~20자 영문 대 소문자, 숫자, 특수문자를 모두 사용해야합니다.";
                } else {
                    userPwMessage.textContent = "";
                }
            });
        </script>

        <label>
            <input class="font" type="text" id="user_name" name="user_name" placeholder="  성명" style="width: 350px; margin: 0 auto;" /><br>
            <span id="user_name_message" style="color: #c20c0c;"></span>
        </label><br>

        <script>
            document.getElementById('user_name').addEventListener('blur', function() {
                var userNameInput = this.value;
                var userNameMessage = document.getElementById('user_name_message');

                if (!/^[\uac00-\ud7a3a-zA-Z]+$/.test(userNameInput)) {
                    userNameMessage.textContent = "이름은 한글과 영문 대/소문자로만 입력 가능합니다.";
                } else {
                    userNameMessage.textContent = "";
                }
            });
        </script>

          <div style = "text-align: center;">
              성별
              남자 <input type="radio" id="user_gender" name="user_gender" value="남자" checked/>
              여자 <input type="radio" id="user_gender" name="user_gender" value="여자"/>
         </div>

        <label>
            <input class ="font" type="text" id = "user_address" name="user_address" placeholder="  주소" style="width: 350px; margin: 0 auto;" /><br>
            <span th:text="${valid_user_address}" style="color: #c20c0c;"></span>

        </label>

        <label>
            <input class="font" type="text" id="user_email" name="user_email" placeholder="  이메일" style="width: 350px; margin: 0 auto;" /><br>
            <span id="user_email_message" style="color: #c20c0c;"></span>
        </label>

        <script>
            document.getElementById('user_email').addEventListener('blur', function() {
                var userEmailInput = this.value;
                var userEmailMessage = document.getElementById('user_email_message');

                if (!/[^@]+@[^@]+\.[^.]+/.test(userEmailInput)) {
                    userEmailMessage.textContent = "올바른 이메일 형식이 아닙니다.";
                } else {
                    userEmailMessage.textContent = "";
                }
            });
        </script>

        <label>
            <input class="font" type="text" id="user_phone" name="user_phone" placeholder="  핸드폰 번호" style="width: 350px; margin: 0 auto;" /><br>
            <span id="user_phone_message" style="color: #c20c0c;"></span>
        </label>

        <script>
            document.getElementById('user_phone').addEventListener('blur', function() {
                var userPhoneInput = this.value;
                var userPhoneMessage = document.getElementById('user_phone_message');

                if (!/^[0-9\-]{1,13}$/.test(userPhoneInput)) {
                    userPhoneMessage.textContent = "휴대전화번호가 정확한지 확인해 주세요.";
                } else {
                    userPhoneMessage.textContent = "";
                }
            });
        </script>

<!--         <a class="background" th:href = "@{/toyproject_one/user_main}" >회원등록</a>-->
        <button class="background" type = "submit">회원 등록</button>

    </div>
</div>
</form>
</body>
</html>

<!--<form th:action="@{/toyproject_one/signup}" method="post" >-->
<!--    <h2>Sign up</h2>-->
<!--    <div>-->
<!--        <label for="user_gender">성별</label> <br>-->
<!--        남자 <input type="radio" id="user_gender" name="user_gender" value="남자"/>-->
<!--        여자 <input type="radio" id="user_gender" name="user_gender" value="여자"/>-->
<!--    </div><br>-->
<!--    <div>-->
<!--        <label for="user_address">주소: </label>-->
<!--        <input type="text" id = "user_address" name="user_address" placeholder="주소를 입력하세요.">-->
<!--    </div><br>-->
<!--    <div>-->
<!--        <label for="user_email">이메일: </label>-->
<!--        <input type="text" id = "user_email" name="user_email" placeholder="이메일을 입력하세요.">-->
<!--    </div><br>-->
<!--    <div>-->
<!--        <script>-->
<!--            const phoneNumber = (target) => {-->
<!--                // 먼저 숫자 이외의 문자를 제거-->
<!--                const cleanedValue = target.value.replace(/[^0-9]/g, '');-->

<!--                // 형식에 맞게 변환-->
<!--                if (cleanedValue.length <= 3) {-->
<!--                    target.value = cleanedValue;-->
<!--                } else if (cleanedValue.length <= 7) {-->
<!--                    target.value = `${cleanedValue.slice(0, 3)}-${cleanedValue.slice(3)}`;-->
<!--                } else {-->
<!--                    target.value = `${cleanedValue.slice(0, 3)}-${cleanedValue.slice(3, 7)}-${cleanedValue.slice(7)}`;-->
<!--                }-->
<!--            }-->
<!--        </script>-->
<!--        <label for="user_phone">핸드폰 번호: </label>-->
<!--        <input type="text" id="user_phone" name="user_phone" maxlength="13"-->
<!--               oninput="phoneNumber(this);"-->
<!--               placeholder="핸드폰 번호를 입력하세요.">-->
<!--    </div><br>-->
<!--    <button type = "submit">회원 등록</button><br><br>-->
<!--</form>-->
<!--</body>-->
<!--</html>-->